# StatuslineUpdateTimer : vim statusline periodic update plugin

[![DeepWiki](https://img.shields.io/badge/DeepWiki-tsuyoshicho%2FStatuslineUpdateTimer.vim-blue.svg?logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAyCAYAAAAnWDnqAAAAAXNSR0IArs4c6QAAA05JREFUaEPtmUtyEzEQhtWTQyQLHNak2AB7ZnyXZMEjXMGeK/AIi+QuHrMnbChYY7MIh8g01fJoopFb0uhhEqqcbWTp06/uv1saEDv4O3n3dV60RfP947Mm9/SQc0ICFQgzfc4CYZoTPAswgSJCCUJUnAAoRHOAUOcATwbmVLWdGoH//PB8mnKqScAhsD0kYP3j/Yt5LPQe2KvcXmGvRHcDnpxfL2zOYJ1mFwrryWTz0advv1Ut4CJgf5uhDuDj5eUcAUoahrdY/56ebRWeraTjMt/00Sh3UDtjgHtQNHwcRGOC98BJEAEymycmYcWwOprTgcB6VZ5JK5TAJ+fXGLBm3FDAmn6oPPjR4rKCAoJCal2eAiQp2x0vxTPB3ALO2CRkwmDy5WohzBDwSEFKRwPbknEggCPB/imwrycgxX2NzoMCHhPkDwqYMr9tRcP5qNrMZHkVnOjRMWwLCcr8ohBVb1OMjxLwGCvjTikrsBOiA6fNyCrm8V1rP93iVPpwaE+gO0SsWmPiXB+jikdf6SizrT5qKasx5j8ABbHpFTx+vFXp9EnYQmLx02h1QTTrl6eDqxLnGjporxl3NL3agEvXdT0WmEost648sQOYAeJS9Q7bfUVoMGnjo4AZdUMQku50McDcMWcBPvr0SzbTAFDfvJqwLzgxwATnCgnp4wDl6Aa+Ax283gghmj+vj7feE2KBBRMW3FzOpLOADl0Isb5587h/U4gGvkt5v60Z1VLG8BhYjbzRwyQZemwAd6cCR5/XFWLYZRIMpX39AR0tjaGGiGzLVyhse5C9RKC6ai42ppWPKiBagOvaYk8lO7DajerabOZP46Lby5wKjw1HCRx7p9sVMOWGzb/vA1hwiWc6jm3MvQDTogQkiqIhJV0nBQBTU+3okKCFDy9WwferkHjtxib7t3xIUQtHxnIwtx4mpg26/HfwVNVDb4oI9RHmx5WGelRVlrtiw43zboCLaxv46AZeB3IlTkwouebTr1y2NjSpHz68WNFjHvupy3q8TFn3Hos2IAk4Ju5dCo8B3wP7VPr/FGaKiG+T+v+TQqIrOqMTL1VdWV1DdmcbO8KXBz6esmYWYKPwDL5b5FA1a0hwapHiom0r/cKaoqr+27/XcrS5UwSMbQAAAABJRU5ErkJggg==)](https://deepwiki.com/tsuyoshicho/StatuslineUpdateTimer.vim)
<!-- DeepWiki badge generated by https://deepwiki.ryoppippi.com/ -->

## attached
- Generic clock function - Common usage:statusline clock

## Installation

### [dein](https://github.com/Shougo/dein.vim)
Add this section in  `dein.toml`.

```toml
[[plugins]]
repo = 'tsuyoshicho/StatuslineUpdateTimer.vim'
```

## Usage
Install via vim or plugin manager.

Vim statusline is updated automatically.

### Commands

When manually start.

```vim
:StatuslineUpdateStart
```

And then manually stop.

```vim
:StatuslineUpdateStop
```

### Option variable

```vim
g:StatuslineUpdateTimer#enable
```

Plugin enable/disable.
Set as before plugin load.

default value: `1`(enable) .

```vim
g:StatuslineUpdateTimer#updatetime
```

Statusline update interval.
Set as before plugin load.

default value: same as `updatetime`.

```vim
g:StatuslineUpdateTimer#adjust_minute
```

Update interval adjust next min+1sec point.
If set as enable, `g:StatuslineUpdateTimer#updatetime` are no affect.

```vim
g:StatuslineUpdateTimer#interval_function
```

Interval call function. default `redrawstatus!` call

```vim
g:StatuslineUpdateTimer#clockformat
```

Clock function format(strftime style).

default value: `'%m/%d(%a) %H:%M'`.

### Function

```vim
StatuslineUpdateTimer#clock()
```

Return formatted clock string.

```vim
StatuslineUpdateTimer#emoji_clock()
```

Return emoji clock string.

### Use-case

#### case 1. statusline direct setting
Write to `.vimrc`.

```vim
set statusline=%{StatuslineUpdateTimer#clock()}
```

#### case 2. lightline at dein
When use [dein](https://github.com/Shougo/dein.vim) plugin manager and [lightline](https://github.com/itchyny/lightline.vim) plugin,
write to `dein.toml`.

```toml
[[plugins]]
repo = 'itchyny/lightline.vim'
depends = ['StatuslineUpateTimer.vim']
hook_add = '''
  let g:lightline = {
      \ 'colorscheme': 'solarized',
      \ 'active': {
      \   'left': [
      \     [ 'mode', 'paste' ],
      \     [ 'readonly', 'filename', 'modified' ]
      \   ],
      \   'right': [
      \     ['clock'],
      \     ['lineinfo', 'percent'],
      \     ['fileformat', 'fileencoding', 'filetype'],
      \   ]
      \ },
      \ 'component_function': {
      \   'clock': 'StatuslineUpdateTimer#clock',
      \ },
      \ }
'''
```

#### case 3. sky-color-clock.vim
Setting : see [mopp/sky-color-clock.vim](https://github.com/mopp/sky-color-clock.vim)

## Limitation

Buffer refreshed by timer.
As a result, opening splash-string,multiline message disappears.

## Author
- Tsuyoshi CHO (https://github.com/tsuyoshicho)

## License
This software is released under the MIT License, see LICENSE.
